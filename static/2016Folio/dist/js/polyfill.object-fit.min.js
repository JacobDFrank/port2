"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){e.matches=e.matches||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,o=(t.document||t.ownerDocument).querySelectorAll(e),n=0;o[n]&&o[n]!==t;)++n;return!!o[n]},e.closest=e.closest||function(e){for(var t=this;t&&!t.matches(e);)t=t.parentElement;return t}}(Element.prototype),function(){if("function"!=typeof window.getMatchedCSSRules){var e=function(e){for(var t=[],o=0,n=e.length;n>o;o++)t.push(e[o]);return t},t=function(e){var t=document.createElement("a");return t.href=e,t.host},o=function(o){var n=o.media&&o.media.mediaText;if("true"==objectFit.disableCrossDomain&&t(o.href)!==window.location.host)return[];if(o.disabled)return[];if(window.matchMedia){if(n&&n.length&&!window.matchMedia(n).matches)return[]}else if(n&&n.length)return[];return e(o.cssRules)},n=function(e,t){return e.match(t),t?t.length:0},r=function(e){for(var t,o,r=[0,0,0],i=e.split(" ");"string"==typeof(t=i.shift());)o=n(t,/\:\:?(after|before|first-letter|first-line|selection)/g),r[2]=o,o&&(t=t.replace(/\:\:?(after|before|first-letter|first-line|selection)/g,"")),o=n(t,/\:(?!not)[\w-]+(\(.*\))?/g),r[1]=o,o&&(t=t.replace(/\:(?!not)[\w-]+(\(.*\))?/g,"")),o=n(t,/\[[^\]]+\]/g),r[1]+=o,o&&(t=t.replace(/\[[^\]]+\]/g,"")),o=n(t,/#[\w-]+/g),r[0]=o,o&&(t=t.replace(/#[\w-]+/g,"")),o=n(t,/\.[\w-]+/g),r[1]+=o,o&&(t=t.replace(/\.[\w-]+/g,"")),r[2]+=n(t,/[\w-]+/g);return parseInt(r.join(""),10)},i=function(e,t){for(var o,n,i=t.split(","),c=0;o=i.shift();)e.closest(o)&&(n=r(o),c=n>c?n:c);return c},c=function(e,t){var o=function(t,o){return i(e,o.selectorText)-i(e,t.selectorText)};return t.sort(o)};window.getMatchedCSSRules=function(t){var n,r,i,l,a=[];for(n=e(window.document.styleSheets);r=n.shift();)for(i=o(r);l=i.shift();)l.styleSheet?i=o(l.styleSheet).concat(i):l.media?i=o(l).concat(i):t.closest(l.selectorText)&&a.push(l);return c(t,a)}}}(),function(e){for(var t=0,o=["webkit","moz"],n=e.requestAnimationFrame,r=e.cancelAnimationFrame,i=o.length;--i>=0&&!n;)n=e[o[i]+"RequestAnimationFrame"],r=e[o[i]+"CancelAnimationFrame"];n&&r||(n=function(e){var o=+new Date,n=Math.max(t+16,o);return setTimeout(function(){e(t=n)},n-o)},r=clearTimeout),e.requestAnimationFrame=n,e.cancelAnimationFrame=r}(window),function(e){var t={};t._debug=!1,t.observer=null,t.disableCrossDomain="false",t.getComputedStyle=function(e,t){return t=t||window,t.getComputedStyle?t.getComputedStyle(e,null):e.currentStyle},t.getDefaultComputedStyle=function(e){var t=e.cloneNode(!0),o={},n=document.createElement("iframe");document.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.write("<body></body>"),n.contentWindow.document.body.appendChild(t),n.contentWindow.document.close();var r,i,c=n.contentWindow.document.querySelectorAll(e.nodeName.toLowerCase())[0],l=this.getComputedStyle(c,n.contentWindow);for(i in l)if(null!==(r=!0===l.getPropertyValue?l.getPropertyValue(i):l[i]))switch(i){default:o[i]=r;break;case"width":case"height":case"minWidth":case"minHeight":case"maxWidth":case"maxHeight":}return document.body.removeChild(n),o},t.getMatchedStyle=function(e,t){var o=null,n=null;e.style.getPropertyValue?n=e.style.getPropertyValue(t):e.currentStyle&&(n=e.currentStyle[t]);var r,i,c=window.getMatchedCSSRules(e),l=c.length;if(l)for(;l-- >0&&(r=c[l],i=r.style.getPropertyPriority(t),null!==o&&!i||(o=r.style.getPropertyValue(t),!i)););return o||null===n||(o=n),o},t.orientation=function(e){if(e.parentNode&&"x-object-fit"===e.parentNode.nodeName.toLowerCase()){var t=e.naturalWidth||e.clientWidth,o=e.naturalHeight||e.clientHeight,n=e.parentNode.clientWidth,r=e.parentNode.clientHeight;!o||t/o>n/r?"wider"!==e.getAttribute("data-x-object-relation")&&(e.setAttribute("data-x-object-relation","wider"),e.className+=" x-object-fit-wider",this._debug&&window.console&&console.log("x-object-fit-wider")):"taller"!==e.getAttribute("data-x-object-relation")&&(e.setAttribute("data-x-object-relation","taller"),e.className+=" x-object-fit-taller",this._debug&&window.console&&console.log("x-object-fit-taller"))}},t.process=function(e){if(e.selector&&e.replacedElements){switch(t.disableCrossDomain=e.disableCrossDomain||"false",e.fittype=e.fittype||"none",e.fittype){default:return;case"none":case"fill":case"contain":case"cover":}var o=e.replacedElements;if(o.length)for(var n=0,r=o.length;r>n;n++)this.processElement(o[n],e)}},t.processElement=function(e,o){var n,r,i=t.getComputedStyle(e),c=t.getDefaultComputedStyle(e),l=document.createElement("x-object-fit");t._debug&&window.console&&console.log("Applying to WRAPPER-------------------------------------------------------");for(n in i)switch(n){default:null!==(r=t.getMatchedStyle(e,n))&&""!==r&&(t._debug&&window.console&&console.log(n+": "+r),l.style[n]=r);break;case"length":case"parentRule":}t._debug&&window.console&&console.log("Applying to REPLACED ELEMENT-------------------------------------------------------");for(n in c)switch(n){default:r=c[n],t._debug&&window.console&&""!==r&&(console.log(n+": "+r),void 0===e.style[n]&&console.log("Indexed style properties (`"+n+"`) not supported in: "+window.navigator.userAgent)),e.style[n]?e.style[n]=r:e.style.property=r;break;case"length":case"parentRule":}l.setAttribute("class","x-object-fit-"+o.fittype),e.parentNode.insertBefore(l,e),l.appendChild(e),t.orientation(e);var a=null,s=function(){null!==a&&window.cancelAnimationFrame(a),a=window.requestAnimationFrame(function(){t.orientation(e)})};switch(o.fittype){default:break;case"contain":case"cover":window.addEventListener?(e.addEventListener("load",s,!1),window.addEventListener("resize",s,!1),window.addEventListener("orientationchange",s,!1)):(e.attachEvent("onload",s),window.attachEvent("onresize",s))}},t.listen=function(e){var o=function(o){for(var n=0,r=e.length;r>n;n++)(o.mozMatchesSelector&&o.mozMatchesSelector(e[n].selector)||o.msMatchesSelector&&o.msMatchesSelector(e[n].selector)||o.oMatchesSelector&&o.oMatchesSelector(e[n].selector)||o.webkitMatchesSelector&&o.webkitMatchesSelector(e[n].selector))&&(e[n].replacedElements=[o],t.process(e[n]),t._debug&&window.console&&console.log("Matching node inserted: "+o.nodeName))},n=function(e){t.observer.disconnect(),o(e),t.observer.observe(document.documentElement,{childList:!0,subtree:!0})},r=function e(t){window.removeEventListener("DOMNodeInserted",e,!1),o(t.target),window.addEventListener("DOMNodeInserted",e,!1)},i=function(e){"x-object-fit"===e.nodeName.toLowerCase()&&(e.parentNode.removeChild(e),t._debug&&window.console&&console.log("Matching node removed: "+e.nodeName))},c=function(e){t.observer.disconnect(),i(e),t.observer.observe(document.documentElement,{childList:!0,subtree:!0})},l=function e(t){window.removeEventListener("DOMNodeRemoved",e,!1),i(t.target.parentNode),window.addEventListener("DOMNodeRemoved",e,!1)};window.MutationObserver?(t._debug&&window.console&&console.log("DOM MutationObserver"),this.observer=new MutationObserver(function(e){e.forEach(function(e){if(e.addedNodes&&e.addedNodes.length)for(var t=e.addedNodes,o=0,r=t.length;r>o;o++)n(t[o]);e.removedNodes&&e.removedNodes.length&&c(e.target)})}),this.observer.observe(document.documentElement,{childList:!0,subtree:!0})):window.addEventListener&&(t._debug&&window.console&&console.log("DOM Mutation Events"),window.addEventListener("DOMNodeInserted",r,!1),window.addEventListener("DOMNodeRemoved",l,!1))},t.init=function(e){if(e){e instanceof Array||(e=[e]);for(var t=0,o=e.length;o>t;t++)e[t].replacedElements=document.querySelectorAll(e[t].selector),this.process(e[t]);this.listen(e)}},t.polyfill=function(e){"objectFit"in document.documentElement.style==0?(t._debug&&window.console&&console.log("object-fit not natively supported"),"complete"===document.readyState?t.init(e):window.addEventListener?window.addEventListener("load",function(){t.init(e)},!1):window.attachEvent("onload",function(){t.init(e)})):t._debug&&window.console&&console.log("object-fit natively supported")},"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module&&"object"==_typeof(module.exports)?module.exports=t:"function"==typeof define&&define.amd?define([],function(){return t}):"object"==(void 0===e?"undefined":_typeof(e))&&"object"==_typeof(e.document)&&(e.objectFit=t)}(window);