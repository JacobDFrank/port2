"use strict";!function r(e,t,a){function n(i,u){if(!t[i]){if(!e[i]){var f="function"==typeof require&&require;if(!u&&f)return f(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var d=t[i]={exports:{}};e[i][0].call(d.exports,function(r){var t=e[i][1][r];return n(t||r)},d,d.exports,r,e,t,a)}return t[i].exports}for(var o="function"==typeof require&&require,i=0;i<a.length;i++)n(a[i]);return n}({1:[function(r,e,t){function a(){l+=2e3;for(var r=1;r<h-1;r+=1)for(var e=1;e<A-1;e+=1){var t=I[r][e][0],a=I[r][e][1];B[r][e][0]=(t+T*n(r,e,0)-t*a*a+s*(1-t))*R,B[r][e][1]=(a+w*n(r,e,1)+t*a*a-(_+s)*a)*R}for(var o=c.getImageData(0,0,h,A),u=1;u<h-1;u+=1)for(var f=1;f<A-1;f+=1){var d=Math.floor(255*(B[u][f][0]-B[u][f][1])),v=155-d,E=65-d,m=255-d,g=4*(u+f*h);o.data[g+0]=m,o.data[g+1]=E,o.data[g+2]=v,o.data[g+3]=255}c.putImageData(o,0,0),i()}function n(r,e,t){var a=.0499,n=0;return n+=-1*I[r][e][t],n+=.2*I[r-1][e][t],n+=.2*I[r+1][e][t],n+=.2*I[r][e+1][t],n+=.2*I[r][e-1][t],n+=I[r-1][e-1][t]*a,n+=I[r+1][e-1][t]*a,n+=I[r-1][e+1][t]*a,n+=I[r+1][e+1][t]*a}function o(){v=window.innerWidth/2,E=window.innerHeight/2}function i(){var r=I;I=B,B=r}console.log("diffusion running");var u=document.getElementById("gl");u.width=u.height=256;var f=u.getContext("webgl"),d=document.getElementById("texture");d.width=d.height=256;var c=d.getContext("2d");d.style.display="none";var v=window.innerWidth/2,E=window.innerHeight/2,h=u.width,A=u.height;f.viewport(0,0,2*f.drawingBufferWidth,2*f.drawingBufferHeight);var m=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,m);var g=new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]);f.bufferData(f.ARRAY_BUFFER,g,f.STATIC_DRAW);var l=0,x={};x.x=h/2,x.y=A/2;for(var R=1,T=1,w=.5,s=.055,_=.061,I=[],B=[],b=Math.PI/180,p=0;p<h;p+=1){I[p]=[],B[p]=[];for(var F=0;F<A;F+=1)I[p][F]=[],I[p][F][0]=1,I[p][F][1]=0,B[p][F]=[],B[p][F][0]=1,B[p][F][1]=0}for(var S=0;S<1;S++)for(var y=0;y<360;y+=30)for(var L=20;L<35;L++){var U=Math.floor(x.x+L*Math.cos(y*b)),D=Math.floor(x.y+L*Math.sin(y*b));I[U][D][1]=1}window.requestAnimationFrame(a),window.addEventListener("resize",o,!1);var C=document.getElementById("vertex").text,P=f.createShader(f.VERTEX_SHADER);f.shaderSource(P,C),f.compileShader(P);var M=document.getElementById("fragment").text,N=f.createShader(f.FRAGMENT_SHADER);f.shaderSource(N,M),f.compileShader(N);var G=f.createProgram();f.attachShader(G,P),f.attachShader(G,N),f.linkProgram(G),f.useProgram(G);var X=f.getAttribLocation(G,"aPosition");f.enableVertexAttribArray(X),f.vertexAttribPointer(X,2,f.FLOAT,!1,0,0),G.textureCoordAttribute=f.getAttribLocation(G,"aTextureCoord"),f.enableVertexAttribArray(G.textureCoordAttribute),f.vertexAttribPointer(G.textureCoordAttribute,2,f.FLOAT,!1,0,0),G.samplerUniform=f.getUniformLocation(G,"uSampler"),f.uniform1i(G.samplerUniform,0);var q=f.createTexture(),H=function(){f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!0),f.bindTexture(f.TEXTURE_2D,q),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,d),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR)},W=function(){f.clearColor(1,1,1,1),f.clear(f.COLOR_BUFFER_BIT)};!function r(){window.requestAnimationFrame(r,u),W(),a(),H(),f.drawArrays(f.TRIANGLES,0,6)}()},{}]},{},[1]);